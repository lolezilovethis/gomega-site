<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings â€“ Gomega Watch</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container center">
    <h1>âš™ï¸ Settings</h1>

    <!-- Theme toggle -->
    <h3>ğŸŒ— Dark Mode</h3>
    <label class="toggle-switch">
      <input type="checkbox" id="darkToggle">
      <span class="slider"></span>
    </label>

    <!-- Change password -->
    <h3>ğŸ”’ Change Password</h3>
    <form onsubmit="changePassword(event)">
      <input type="password" id="oldPass" placeholder="Current Password" required>
      <input type="password" id="newPass" placeholder="New Password" required>
      <button type="submit">Change Password</button>
    </form>

    <!-- Clear local data -->
    <h3>ğŸ§¼ Clear Data</h3>
    <button onclick="clearLocalData()">Clear All User Data</button>

    <!-- Logout -->
    <h3>ğŸšª Log Out</h3>
    <button onclick="logout()">Log Out</button>

    <!-- Join Discord -->
    <h3>ğŸ’¬ Join Our Discord</h3>
    <a href="https://discord.gg/YOUR_SERVER_CODE" target="_blank" class="btn">Join Discord</a>

    <footer style="margin-top: 30px;">
      <a href="scripts.html">â¬… Back to Scripts</a>
    </footer>
  </div>

  <script>
    // Set theme on load
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.classList.add("dark");
    }

    // Handle theme toggle
    const toggle = document.getElementById("darkToggle");
    toggle.checked = localStorage.getItem("theme") === "dark";
    toggle.addEventListener("change", () => {
      const isDark = toggle.checked;
      document.documentElement.classList.toggle("dark", isDark);
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });

    // Password changer
    function changePassword(e) {
      e.preventDefault();
      const user = localStorage.getItem("currentUser");
      const oldPass = document.getElementById("oldPass").value;
      const newPass = document.getElementById("newPass").value;
      const data = JSON.parse(localStorage.getItem("user_" + user));

      if (!data || data.pass !== oldPass) {
        return alert("âŒ Old password is incorrect.");
      }

      data.pass = newPass;
      localStorage.setItem("user_" + user, JSON.stringify(data));
      alert("âœ… Password changed!");
    }

    // Clear user data
    function clearLocalData() {
      if (confirm("Are you sure you want to clear all local data?")) {
        localStorage.clear();
        alert("âœ… Local storage cleared.");
        window.location.href = "index.html";
      }
    }

    // Log out
    function logout() {
      localStorage.removeItem("currentUser");
      alert("ğŸšª Logged out.");
      window.location.href = "signin.html";
    }
  </script>
</body>
</html>
