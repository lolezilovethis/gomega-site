<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings â€“ Gomega Watch</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container center">
    <h1>Settings</h1>

    <h3>ðŸŒ— Dark Mode</h3>
    <label class="toggle-switch">
      <input type="checkbox" id="darkToggle">
      <span class="slider"></span>
    </label>

    <h3>ðŸ”’ Change Password</h3>
    <form onsubmit="changePassword(event)">
      <input type="password" id="oldPass" placeholder="Current Password" required>
      <input type="password" id="newPass" placeholder="New Password" required>
      <button type="submit">Change Password</button>
    </form>

    <footer><a href="scripts.html">â¬… Back to Scripts</a></footer>
  </div>

  <script>
    const toggle = document.getElementById("darkToggle");
    toggle.checked = localStorage.getItem("theme") === "dark";
    toggle.addEventListener("change", () => {
      document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", toggle.checked ? "dark" : "light");
    });
    if (toggle.checked) document.documentElement.classList.add("dark");

    function changePassword(e) {
      e.preventDefault();
      const user = localStorage.getItem("currentUser");
      const oldPass = document.getElementById("oldPass").value;
      const newPass = document.getElementById("newPass").value;
      const data = JSON.parse(localStorage.getItem("user_" + user));

      if (data.pass !== oldPass) return alert("Old password is incorrect.");

      data.pass = newPass;
      localStorage.setItem("user_" + user, JSON.stringify(data));
      alert("Password changed!");
    }
  </script>
</body>
</html>
