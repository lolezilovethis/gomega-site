/* base layout */
html,body{
  height:100%;
  margin:0;
  padding:0;
  background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
  color:var(--pale);
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Georgia,serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
body{
  overscroll-behavior-y: contain;
  scroll-behavior: smooth;
  min-height:100vh;
  display:block;
}

main{
  height:100vh;
  width:100%;
  display:grid;
  grid-auto-rows:100vh;
  scroll-snap-type: y mandatory;
  overflow-y:auto;
  padding:28px 20px;
  box-sizing:border-box;
}

section{
  scroll-snap-align:start;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:12px;
  box-sizing:border-box;
  position:relative;
}

/* container card - avoid overlap by using minmax column */
.stage{
  width:100%;
  max-width:1200px;
  border-radius:18px;
  padding:28px;
  background: linear-gradient(180deg, rgba(255,255,255,0.006), rgba(255,255,255,0.003));
  box-shadow: 0 30px 90px rgba(1,3,8,0.78), inset 0 1px 0 rgba(255,255,255,0.01);
  display:grid;
  grid-template-columns: 1fr minmax(240px, 420px);
  gap:28px;
  align-items:start;
  backdrop-filter: blur(6px) saturate(0.7);
  border: 1px solid rgba(255,255,255,0.02);
  position:relative;
  overflow:visible;
  min-height:360px;
}

/* left content: allow scrolling inside if content is tall so it won't overlap the right pane */
.left{
  position:relative;
  z-index:4;
  overflow:visible;
}
.left .content-wrap {
  max-height: calc(100vh - 140px);
  overflow-y:auto;
  padding-right:8px;
  box-sizing:border-box;
}
.left h1{
  margin:0 0 8px 0;
  font-family: "Georgia", "Times New Roman", serif;
  font-weight:600;
  font-size:44px;
  color: #f6f9ff;
  letter-spacing: -0.6px;
  line-height:1.02;
  text-shadow: 0 14px 48px rgba(6,10,18,0.7);
}
.byline{color:var(--muted); margin-bottom:18px; font-size:14px;}
.story{
  color: #d8e8ff;
  font-size:17px;
  line-height:1.9;
  margin-bottom:14px;
  max-width:70ch;
  opacity:0.98;
  text-wrap:balance;
}
.story em{color:var(--muted); font-style:normal; opacity:0.95}

/* right column - sticky, limited height so it won't overlap */
.right{
  padding:20px;
  border-radius:14px;
  background: linear-gradient(180deg, rgba(8,12,18,0.6), rgba(6,8,12,0.45));
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
  text-align:center;
  color:var(--muted);
  border: 1px solid rgba(255,255,255,0.02);
  box-shadow: 0 8px 30px rgba(6,10,18,0.6);
  position:sticky;
  top:28px; /* keeps it visible but prevents overlap */
  max-height: calc(100vh - 56px);
  overflow-y:auto;
  z-index:5;
  min-width:220px;
  transform: translateZ(0);
}

/* beat-driven logo + float */
.logo-broken-beat {
  transform: translateY(var(--beat-px,0px));
  transition: transform 140ms linear;
  display:inline-block;
  will-change: transform;
}
.logo-broken-float {
  display:inline-block;
  transform-origin:center;
  animation: slowFloat 6s ease-in-out infinite;
}
@keyframes slowFloat {
  0% { transform: translateY(0) rotate(-2deg) skewY(-1deg); }
  50% { transform: translateY(-8px) rotate(2deg) skewY(1deg); }
  100% { transform: translateY(0) rotate(-2deg) skewY(-1deg); }
}

.logo-broken{
  font-family: "Georgia", serif;
  font-size:72px;
  color: rgba(255,255,255,0.92);
  transform: translateY(-6px) skewY(-2deg);
  letter-spacing: -1px;
  filter:grayscale(50%) contrast(88%) blur(0.12px) saturate(0.85);
  margin-bottom:6px;
  display:inline-block;
  user-select:none;
}
.goodbye{font-weight:700;color:#f2f7ff}
.small{font-size:13px;color:var(--muted)}

/* curved G logo */
.curved-logo {
  width:140px;
  height:84px;
  display:block;
  margin-bottom:10px;
  transform-origin:center;
  filter: drop-shadow(0 10px 30px rgba(6,10,18,0.6));
  transform: translateY(calc(-6px - var(--beat) * 2px)) scale(calc(1 + var(--beat) * 0.07));
  transition: transform 120ms linear;
}
.curved-logo svg { width:100%; height:100%; display:block; overflow:visible; }
.curved-logo .stroke {
  fill:none;
  stroke: rgba(220,235,255,0.95);
  stroke-width:6;
  stroke-linecap:round;
  stroke-linejoin:round;
  stroke-opacity:0.98;
  mix-blend-mode:screen;
  transition: stroke 260ms linear;
}
.curved-logo .wave {
  stroke-dasharray: 600;
  stroke-dashoffset: 600;
  animation: draw 2200ms cubic-bezier(.22,.9,.35,1) forwards;
}
@keyframes draw { to { stroke-dashoffset: 0; } }

/* vignette + fog (amplified by beat) */
.vignette{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:30;
  background:
    radial-gradient(80vh 40vh at 50% 10%, rgba(12,18,30,calc(0.12 + var(--beat) * 0.18)), transparent 22%),
    linear-gradient(180deg, rgba(6,8,12,calc(0.28 + var(--beat) * 0.28)), transparent 34%),
    radial-gradient(60% 30% at 80% 80%, rgba(8,10,14,calc(0.28 + var(--beat) * 0.22)), transparent 10%),
    linear-gradient(0deg, rgba(0,0,0,0.72), rgba(0,0,0,0.46));
  mix-blend-mode:multiply;
  transition: background 280ms linear;
}

.fog{
  position:absolute;
  inset:0;
  z-index:1;
  pointer-events:none;
  background-image: radial-gradient(600px 160px at 10% 20%, rgba(120,140,170,0.02), transparent),
                    radial-gradient(800px 260px at 80% 60%, rgba(70,90,120,0.03), transparent);
  opacity:0.95;
  filter: blur(calc(6px + var(--beat) * 2px)) saturate(0.8);
}

/* rain overlay (subtle) */
.rain {
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:25;
  background-image: linear-gradient(transparent 60%, rgba(200,215,255,var(--rain-opacity)) 61%);
  opacity: calc(0.8 + var(--beat) * 0.28);
  mix-blend-mode: screen;
  background-size: 3px 60px;
  transform: translateZ(0);
  animation: rain-fall 12s linear infinite;
  filter: blur(0.4px);
}
@keyframes rain-fall {
  from { background-position: 0 0; }
  to { background-position: -160px 820px; }
}

/* tear field â€” lots of slow tears, subtle */
.tear-field{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:24;
  overflow:visible;
}
.tear{
  position:absolute;
  width:4px;
  height:18px;
  background:linear-gradient(180deg, rgba(200,215,255,0.24), rgba(200,215,255,0.06));
  border-radius:6px;
  opacity:0.9;
  transform:translateY(-40vh);
  animation:fall linear infinite;
  filter: blur(0.6px) saturate(0.9);
  mix-blend-mode:screen;
}
@keyframes fall { to { transform:translateY(130vh) rotate(7deg); opacity:0.03; } }

/* small accent behind header */
.accent-stripe{
  position:absolute;
  left:-30px;
  top:20px;
  width:360px;
  height:160px;
  transform: rotate(-12deg);
  background: linear-gradient(90deg, rgba(255,255,255,0.012), rgba(255,255,255,0.0));
  filter: blur(26px) saturate(0.6);
  opacity:0.06;
  z-index:0;
  border-radius:8px;
}

/* scroll hint */
.scroll-hint{
  position:absolute;
  bottom:18px;
  left:50%;
  transform:translateX(-50%);
  color:var(--muted);
  font-size:13px;
  display:flex;
  gap:10px;
  align-items:center;
  z-index:12;
  opacity:0.95;
}
.arrow{
  width:12px;height:12px;border-bottom:2px solid var(--muted);border-right:2px solid var(--muted);
  transform:rotate(45deg);display:inline-block;margin-top:2px; animation: bounce 1400ms infinite;
}
@keyframes bounce { 0%,100%{ transform:translateY(0) rotate(45deg)} 50%{ transform:translateY(8px) rotate(45deg)} }

/* future section */
.future-stage{
  width:100%;
  max-width:1100px;
  border-radius:18px;
  padding:40px;
  background: linear-gradient(180deg, rgba(7,10,14,0.56), rgba(4,6,8,0.62));
  box-shadow: 0 40px 110px rgba(1,3,8,0.84), inset 0 1px 0 rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.02);
  color: #d6e9ff;
}
.future h2{
  font-family: Georgia,serif;
  font-size:34px;
  margin:0 0 12px 0;
  color:#f5f9ff;
}
.future p{color:#d6e9ff; font-size:16px; line-height:1.7; max-width:78ch;}
.future .options{margin-top:18px; display:flex; gap:12px; flex-wrap:wrap;}
.chip{
  padding:10px 12px;
  border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  color:var(--muted);
  border:1px solid rgba(255,255,255,0.02);
  font-weight:600;
  cursor:default;
}

/* overlay prompt for playback */
.play-overlay{
  position:fixed;
  inset:0;
  backdrop-filter: blur(6px) saturate(0.8);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:80;
  background: linear-gradient(180deg, rgba(3,4,6,0.72), rgba(3,4,6,0.72));
  color:#f2f7ff;
  text-align:center;
  padding:28px;
  gap:18px;
  flex-direction:column;
  transition:opacity 260ms ease;
}
.play-overlay.hidden{ opacity:0; pointer-events:none; }
.play-overlay .cta{ background:transparent; border:1px solid rgba(255,255,255,0.06); padding:12px 18px; border-radius:10px; cursor:pointer; font-weight:700; color:var(--pale); }
.play-hint{ color:var(--muted); font-size:15px; max-width:760px; line-height:1.45; }

/* now-playing chip */
.now-playing {
  margin-top:8px;
  font-size:13px;
  color:var(--pale);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:8px 12px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.03);
  font-weight:600;
  display:flex;
  gap:8px;
  align-items:center;
}

.authority-link {
  color: #cfe7ff;
  text-decoration: underline;
  font-weight:600;
  margin-top:6px;
  display:inline-block;
  font-size:13px;
}

/* responsive adjustments to prevent overlap and wrap gracefully */
@media (max-width:980px){
  main { padding:18px 12px; }
  .stage{ grid-template-columns: 1fr; padding:18px; gap:18px; }
  .right{ position:relative; top:auto; max-height:none; order:-1; width:100%; }
  .logo-broken{ font-size:54px; }
  .left h1{ font-size:32px; }
  .curved-logo{ width:86px;height:64px; margin:0 auto 8px; }
  .left .content-wrap { max-height: none; }
  .scroll-hint { bottom:12px; }
}

/* small utility: subtle reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .logo-broken-float, .curved-logo, .tear, .rain { animation: none !important; transition: none !important; }
}
